---
title: åˆ†æ²»è¿˜æ˜¯èƒŒåŒ…ï¼Ÿkkksc03 å¤ä¹ æ—¶é—´é—®é¢˜çš„ DP ä¸ DFS åŒè§£å‰–æ
date: 2026-01-27
description: æ·±å…¥è§£ææ´›è°· P2392â€œkkksc03 è„‘åŠ›åˆ†é…â€é—®é¢˜ï¼šä¸ºä»€ä¹ˆå­é›†åˆ’åˆ†ç­‰ä»·äº 01 èƒŒåŒ…ï¼Ÿå€’åºæ›´æ–°ä¸ºä½•ä¸å¯çœç•¥ï¼ŸDP åœ¨ S å°æ—¶ç¢¾å‹ DFSï¼Œè€Œ DFS åœ¨æ•°å€¼çˆ†ç‚¸æ—¶æˆä¸ºå”¯ä¸€é€‰æ‹©ã€‚é™„å®Œæ•´ C++ å®ç°ä¸é¿å‘æŒ‡å—ã€‚
---
---

# ã€ç®—æ³•è¯¦è§£ã€‘kkksc03 å¤ä¹ æ—¶é—´é—®é¢˜ï¼šDP ä¸ DFS ä¸¤ç§è§£æ³•  
https://www.luogu.com.cn/problem/P2392

> é¢˜ç›®å¤§æ„ï¼š  
> kkksc03 è¦å¤ä¹  4 ç§‘ï¼Œæ¯ç§‘æœ‰è‹¥å¹²é¢˜ç›®ï¼Œæ¯é“é¢˜æœ‰è€—æ—¶ã€‚  
> ä»–æœ‰ä¸¤ä¸ªå¤§è„‘ï¼ˆå·¦è„‘ã€å³è„‘ï¼‰ï¼Œå¯ä»¥**åŒæ—¶å·¥ä½œ**ï¼Œæ¯é“é¢˜å¿…é¡»å®Œæ•´äº¤ç»™ä¸€ä¸ªè„‘ã€‚  
> æ¯ä¸ªè„‘ä¸Šçš„é¢˜ç›®æ˜¯**ä¸²è¡Œåš**çš„ï¼Œæ‰€ä»¥ä¸€ç§‘çš„å®Œæˆæ—¶é—´ = `max(å·¦è„‘æ€»æ—¶é—´, å³è„‘æ€»æ—¶é—´)`ã€‚  
> ç›®æ ‡ï¼šæ±‚å››ç§‘æ€»æ—¶é—´æœ€å°å€¼ã€‚

æˆ‘ä»¬é‡ç‚¹è®²è§£**å¦‚ä½•æ±‚ä¸€ç§‘çš„æœ€çŸ­æ—¶é—´**ï¼Œå››ç§‘ç­”æ¡ˆç›¸åŠ å³å¯ã€‚

---

## ä¸€ã€åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰è§£æ³• â€”â€” æ¨èï¼

### ğŸ¯ æ ¸å¿ƒæ€æƒ³ï¼ˆç”¨äººè¯è®²ï¼‰

æˆ‘ä»¬è¦æŠŠé¢˜ç›®åˆ†æˆä¸¤å †ï¼Œè®©ä¸¤å †çš„æ€»æ—¶é—´**å°½é‡æ¥è¿‘**ã€‚

æ¯”å¦‚é¢˜ç›®æ˜¯ `[2, 4, 3]`ï¼Œæ€»æ—¶é—´æ˜¯ `2+4+3 = 9`ã€‚

- æœ€ç†æƒ³çš„æƒ…å†µï¼šä¸€å † 4.5ï¼Œå¦ä¸€å † 4.5 â†’ å®Œæˆæ—¶é—´ = 4.5
- ä½†é¢˜ç›®æ—¶é—´æ˜¯æ•´æ•°ï¼Œä¸èƒ½æ‹†ï¼Œæ‰€ä»¥æ‰¾**æœ€æ¥è¿‘ 4.5 çš„æ•´æ•°åˆ†æ³•**

å¯èƒ½çš„åˆ†æ³•ï¼š
- å·¦=2+3=5ï¼Œå³=4 â†’ å®Œæˆæ—¶é—´ = max(5,4) = **5**
- å·¦=4ï¼Œå³=2+3=5 â†’ ä¹Ÿæ˜¯ 5
- å·¦=2+4=6ï¼Œå³=3 â†’ å®Œæˆæ—¶é—´ = 6ï¼ˆæ›´å·®ï¼‰

âœ… æ‰€ä»¥æœ€ä¼˜æ˜¯ **5**ã€‚

**å…³é”®å‘ç°**ï¼š  
> æˆ‘ä»¬åªéœ€è¦åœ¨æ‰€æœ‰â€œèƒ½å‡‘å‡ºæ¥çš„æ€»æ—¶é—´â€ä¸­ï¼Œæ‰¾ä¸€ä¸ª **ä¸è¶…è¿‡ 9/2 = 4** çš„æœ€å¤§å€¼ã€‚  
> è¿™é‡Œèƒ½å‡‘å‡º 4ï¼ˆé€‰é¢˜ç›® 4ï¼‰ï¼Œæ‰€ä»¥ç­”æ¡ˆå°±æ˜¯ `9 - 4 = 5`ã€‚

ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºï¼š
- ä¸€è¾¹æ˜¯ 4ï¼Œå¦ä¸€è¾¹å¿…ç„¶æ˜¯ 9âˆ’4=5
- å®Œæˆæ—¶é—´ = max(4,5) = 5
- è€Œ 4 æ˜¯ â‰¤4.5 çš„æœ€å¤§å¯èƒ½å€¼ï¼Œæ‰€ä»¥ 5 æ˜¯æœ€å°å¯èƒ½å®Œæˆæ—¶é—´ï¼

---

### ğŸ”— ä¸ºä»€ä¹ˆè¿™ç­‰ä»·äº 01 èƒŒåŒ…é—®é¢˜ï¼Ÿ

æƒ³è±¡ä½ æœ‰ä¸€ä¸ªèƒŒåŒ…ï¼Œå®¹é‡ä¸é™ï¼Œä½†ä½ å…³å¿ƒçš„æ˜¯ï¼š**å“ªäº›æ€»é‡é‡èƒ½è¢«æ°å¥½è£…å‡ºæ¥**ã€‚

- æ¯é“é¢˜çš„è€—æ—¶ = ä¸€ä¸ªç‰©å“çš„â€œé‡é‡â€
- é€‰ä¸€äº›é¢˜ç»™å·¦è„‘ = ä»ç‰©å“ä¸­é€‰å‡ºä¸€ä¸ªå­é›†æ”¾è¿›èƒŒåŒ…
- èƒŒåŒ…çš„â€œå½“å‰é‡é‡â€ = å·¦è„‘çš„æ€»è€—æ—¶

æˆ‘ä»¬ä¸å…³å¿ƒä»·å€¼ï¼Œåªå…³å¿ƒ**æŸä¸ªæ€»è€—æ—¶æ˜¯å¦å¯è¾¾**â€”â€”è¿™å°±æ˜¯ **01 èƒŒåŒ…çš„â€œå¯è¡Œæ€§â€ç‰ˆæœ¬**ï¼

> âœ… æ‰€ä»¥ï¼Œæ±‚â€œæ‰€æœ‰å¯èƒ½çš„å·¦è„‘æ€»æ—¶é—´â€ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ±‚ 01 èƒŒåŒ…ä¸­æ‰€æœ‰å¯è¾¾çš„é‡é‡ã€‚

---

### âš ï¸ ä¸ºä»€ä¹ˆå¿…é¡»å€’åºæ›´æ–°ï¼Ÿæ­£åºä¼šæ€æ ·ï¼Ÿ

åœ¨ 01 èƒŒåŒ…ä¸­ï¼Œ**æ¯ä¸ªç‰©å“åªèƒ½ç”¨ä¸€æ¬¡**ã€‚  
å¦‚æœæˆ‘ä»¬**æ­£åºæ›´æ–°** `dp` æ•°ç»„ï¼Œä¼šå¯¼è‡´**åŒä¸€ä¸ªé¢˜ç›®è¢«é‡å¤ä½¿ç”¨å¤šæ¬¡**ï¼

#### âŒ åä¾‹ï¼šé¢˜ç›® `[3]`ï¼ˆåªæœ‰ä¸€é“ 3 åˆ†é’Ÿçš„é¢˜ï¼‰

- æ­£ç¡®ï¼šåªèƒ½å‡‘å‡º 0 æˆ– 3
- å¦‚æœæ­£åºæ›´æ–°ï¼š

```cpp
for (j = 3; j <= S; j++) {
    if (dp[j - 3]) dp[j] = true;
}
```

æ‰§è¡Œè¿‡ç¨‹ï¼š
- `j=3`ï¼š`dp[0]=true` â†’ `dp[3]=true` âœ…
- `j=6`ï¼š`dp[3]=true`ï¼ˆåˆšè¢«è®¾ä¸º trueï¼ï¼‰â†’ `dp[6]=true` âŒ

ğŸ‘‰ ç»“æœé”™è¯¯åœ°è®¤ä¸ºå¯ä»¥å‡‘å‡º 6ï¼ˆå³ç”¨äº†ä¸¤æ¬¡ 3ï¼‰ï¼Œä½†å®é™…åªæœ‰ä¸€é“é¢˜ï¼

#### âœ… å€’åºæ›´æ–°å¦‚ä½•é¿å…ï¼Ÿ

å€’åºæ—¶ï¼Œè®¡ç®— `dp[j]` ç”¨çš„æ˜¯**ä¸Šä¸€è½®ï¼ˆæœªä½¿ç”¨å½“å‰é¢˜ï¼‰çš„ `dp[j - t]`**ï¼Œä¿è¯æ¯é“é¢˜åªè¢«è€ƒè™‘ä¸€æ¬¡ã€‚

> **å£è¯€**ï¼š01 èƒŒåŒ…ç”¨å€’åºï¼Œé˜²æ­¢é‡å¤ï¼›å®Œå…¨èƒŒåŒ…ç”¨æ­£åºï¼Œå…è®¸å¤šæ¬¡ã€‚

---

### ğŸ”§ DP æ€ä¹ˆå®ç°ï¼Ÿ

æˆ‘ä»¬ç”¨ä¸€ä¸ªå¸ƒå°”æ•°ç»„ `dp[j]`ï¼Œè¡¨ç¤ºï¼š**èƒ½ä¸èƒ½å‡‘å‡ºæ€»æ—¶é—´ j**ã€‚

#### æ­¥éª¤ï¼š
1. ç®—å‡ºæ€»æ—¶é—´ `S`
2. åˆå§‹åŒ– `dp[0] = true`ï¼ˆä¸é€‰ä»»ä½•é¢˜ï¼Œå’Œä¸º 0ï¼‰
3. å¯¹æ¯é“é¢˜è€—æ—¶ `t`ï¼Œ**ä»å¤§åˆ°å°**æ›´æ–° `dp` æ•°ç»„ï¼ˆé˜²æ­¢é‡å¤ä½¿ç”¨ï¼‰
4. ä» `S/2` å¾€ä¸‹æ‰¾ï¼Œç¬¬ä¸€ä¸ª `dp[j] == true` çš„ `j` å°±æ˜¯æˆ‘ä»¬è¦çš„
5. ç­”æ¡ˆ = `S - j`

#### â±ï¸ ä¸ºä»€ä¹ˆå¤æ‚åº¦æ˜¯ O(n Ã— S)ï¼Ÿ

- å¤–å±‚å¾ªç¯ï¼šn é“é¢˜ â†’ **n æ¬¡**
- å†…å±‚å¾ªç¯ï¼šå¯¹æ¯é“é¢˜ï¼Œéå† `j = S downto t` â†’ æœ€å¤š **S æ¬¡**
- æ€»æ“ä½œæ•° â‰ˆ n Ã— S

æœ¬é¢˜ä¸­ï¼šn â‰¤ 20ï¼Œæ¯é¢˜ â‰¤ 60 â†’ S â‰¤ 1200  
æ‰€ä»¥æœ€å¤š 20 Ã— 1200 = **24,000 æ¬¡æ“ä½œ**ï¼Œéå¸¸å¿«ï¼

---

### ğŸ’» C++ ä»£ç ï¼ˆDPï¼‰

```cpp
#include <iostream>
#include <vector>
using namespace std;

// ç”¨ DP æ±‚ä¸€ç§‘çš„æœ€çŸ­å®Œæˆæ—¶é—´
int solve_dp(vector<int> times) {
    if (times.empty()) return 0;
    int S = 0;
    for (int x : times) S += x;

    vector<bool> dp(S + 1, false);
    dp[0] = true; // å’Œä¸º0æ€»æ˜¯å¯ä»¥ï¼ˆä¸é€‰ä»»ä½•é¢˜ï¼‰

    // 01èƒŒåŒ…ï¼šå€’åºæ›´æ–°ï¼Œé˜²æ­¢åŒä¸€é¢˜è¢«ç”¨å¤šæ¬¡
    for (int t : times) {
        for (int j = S; j >= t; j--) {
            if (dp[j - t]) {
                dp[j] = true;
            }
        }
    }

    // ä» S/2 å‘ä¸‹æ‰¾æœ€å¤§çš„å¯è¾¾å’Œ
    for (int j = S / 2; j >= 0; j--) {
        if (dp[j]) {
            return S - j; // å¦ä¸€åŠæ˜¯ S-jï¼Œä¸” â‰¥ j
        }
    }
    return S;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int s1, s2, s3, s4;
    cin >> s1 >> s2 >> s3 >> s4;

    auto read = [](int n) {
        vector<int> v(n);
        for (int i = 0; i < n; i++) cin >> v[i];
        return v;
    };

    int ans = solve_dp(read(s1)) +
              solve_dp(read(s2)) +
              solve_dp(read(s3)) +
              solve_dp(read(s4));

    cout << ans << '\n';
    return 0;
}
```

---

## äºŒã€æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰è§£æ³• â€”â€” å¤‡é€‰æ–¹æ¡ˆ

### ğŸ¯ ä»€ä¹ˆæ—¶å€™ç”¨ DFSï¼Ÿ

å½“é¢˜ç›®è€—æ—¶**éå¸¸å¤§**ï¼ˆæ¯”å¦‚ 10â¹ï¼‰ï¼Œæ€»å’Œ S ä¼šçˆ†ç‚¸ï¼ŒDP å¼€ä¸ä¸‹æ•°ç»„ã€‚  
ä½†åªè¦**é¢˜ç›®æ•°é‡ä¸å¤šï¼ˆn â‰¤ 20ï¼‰**ï¼Œå°±å¯ä»¥ç”¨ DFS æšä¸¾æ‰€æœ‰åˆ†é…æ–¹å¼ã€‚

### ğŸ” DFS æ€è·¯

å¯¹æ¯é“é¢˜ï¼Œæœ‰ä¸¤ç§é€‰æ‹©ï¼š
- åˆ†ç»™å·¦è„‘
- åˆ†ç»™å³è„‘

é€’å½’æšä¸¾æ‰€æœ‰ 2â¿ ç§åˆ†é…ï¼Œè®°å½•æœ€å°çš„ `max(å·¦, å³)`ã€‚

#### âœ‚ï¸ å‰ªæä¼˜åŒ–

å¦‚æœå½“å‰ `max(å·¦, å³)` å·²ç» â‰¥ å½“å‰æœ€ä¼˜ç­”æ¡ˆï¼Œå°±ä¸ç”¨ç»§ç»­äº†ï¼Œç›´æ¥è¿”å›ã€‚

è¿™èƒ½å¤§å¹…å‡å°‘æœç´¢é‡ã€‚

---

### ğŸ’» C++ ä»£ç ï¼ˆDFS + å‰ªæï¼‰

```cpp
#include <iostream>
#include <vector>
#include <climits>
using namespace std;

vector<int> cur_times;
int n, best_ans;

void dfs(int i, int left, int right) {
    int cur = max(left, right);
    if (cur >= best_ans) return; // å‰ªæ
    if (i == n) {
        best_ans = min(best_ans, cur);
        return;
    }
    dfs(i + 1, left + cur_times[i], right);     // ç»™å·¦è„‘
    dfs(i + 1, left, right + cur_times[i]);     // ç»™å³è„‘
}

int solve_dfs(vector<int> times) {
    if (times.empty()) return 0;
    cur_times = times;
    n = times.size();
    best_ans = INT_MAX;
    dfs(0, 0, 0);
    return best_ans;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int s1, s2, s3, s4;
    cin >> s1 >> s2 >> s3 >> s4;

    auto read = [](int n) {
        vector<int> v(n);
        for (int i = 0; i < n; i++) cin >> v[i];
        return v;
    };

    int ans = solve_dfs(read(s1)) +
              solve_dfs(read(s2)) +
              solve_dfs(read(s3)) +
              solve_dfs(read(s4));

    cout << ans << '\n';
    return 0;
}
```

---

## ä¸‰ã€DP vs DFSï¼šæ€ä¹ˆé€‰ï¼Ÿ

| æ–¹æ³• | é€‚ç”¨åœºæ™¯ | ä¼˜ç‚¹ | ç¼ºç‚¹ |
|------|--------|------|------|
| **DP** | é¢˜ç›®æ€»è€—æ—¶ S ä¸å¤§ï¼ˆâ‰¤ 10âµï¼‰ï¼ˆæœ¬é¢˜ S â‰¤ 1200ï¼‰ | æå¿«ã€ç¨³å®šã€ä»£ç ç®€å• | S å¤ªå¤§ä¼šçˆ†å†…å­˜ |
| **DFS** | é¢˜ç›®æ•°é‡ n å°ï¼ˆâ‰¤ 25ï¼‰ä½†æ¯é¢˜è€—æ—¶å¾ˆå¤§ï¼ˆå¦‚ 10â¹ï¼‰ | ä¸ä¾èµ– Sï¼Œåªçœ‹ n | n å¤§äº†ä¼šè¶…æ—¶ |

> âœ… **æœ¬é¢˜æ¨è DP**ï¼šå› ä¸º S å¾ˆå°ï¼ŒDP åªéœ€ 24,000 æ¬¡æ“ä½œï¼Œæ¯” DFS å¿«å¾—å¤šï¼

---