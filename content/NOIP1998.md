---
title: æ‹¼æ¥æœ€å¤§æ•´æ•°ï¼šè´ªå¿ƒé€»è¾‘è¯¯åŒºä¸DPå†…å­˜æ·±æ¸Šæ·±åº¦è§£æ
date: 2025-01-22
description: æ·±å…¥è§£æNOIP1998æé«˜ç»„æ‹¼æ¥æœ€å¤§æ•°é—®é¢˜ï¼Œä¸ä»…å‰–æè´ªå¿ƒæ’åºä¸­ç›´æ¥ä½¿ç”¨å­—å…¸åºçš„é€»è¾‘é”™è¯¯ï¼Œè¿˜æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•ç”¨åŠ¨æ€è§„åˆ’è§£é¢˜å¹¶é¿å…å†…å­˜çˆ†ç‚¸ã€‚
---

# æ‹¼æ¥æœ€å¤§æ•´æ•°ï¼šè´ªå¿ƒé€»è¾‘è¯¯åŒºä¸DPå†…å­˜æ·±æ¸Šæ·±åº¦è§£æ

## ğŸ§© é—®é¢˜æè¿°

[NOIP1998 æé«˜ç»„] æ‹¼æ¥æœ€å¤§æ•°  
https://www.luogu.com.cn/problem/P1012

è¿™é“é¢˜æœ‰ä¸¤ç§ç»å…¸çš„è§£æ³•ï¼šä¸€ç§æ˜¯ $O(N \log N)$ çš„**è´ªå¿ƒç®—æ³•**ï¼Œå¦ä¸€ç§æ˜¯ $O(N \cdot 2^N)$ çš„**åŠ¨æ€è§„åˆ’ï¼ˆçŠ¶å‹DPï¼‰**ã€‚ä½†åœ¨å®ç°æ—¶ï¼Œè´ªå¿ƒå®¹æ˜“æ‰è¿›"å­—å…¸åºé™·é˜±"ï¼Œè€Œ DP åˆ™å®¹æ˜“é­é‡"å†…å­˜çˆ†ç‚¸"ã€‚

---

## âŒ è´ªå¿ƒé™·é˜±ï¼šä¸ºä»€ä¹ˆç›´æ¥ç”¨å­—å…¸åºæ˜¯é”™çš„ï¼Ÿ

è¿™æ˜¯æœ€å¸¸è§çš„ç›´è§‰é”™è¯¯ï¼Œå¾ˆå¤šåˆå­¦è€…ä¼šç›´æ¥æŠŠæ•°å­—å½“æˆå­—ç¬¦ä¸²ï¼Œç„¶åç”¨é»˜è®¤çš„å­—å…¸åºæ’åºã€‚

### é”™è¯¯ä»£ç ç¤ºä¾‹

```cpp
// âŒ é”™è¯¯å†™æ³•ï¼šç›´æ¥ä½¿ç”¨å­—å…¸åºæ¯”è¾ƒ
bool cmp(const string& a, const string& b) {
    return a > b; // æˆ–è€…ç›´æ¥ sort(s, s+n);
}
```

### ä¸ºä»€ä¹ˆé”™ï¼Ÿ

å­—å…¸åºæ¯”è¾ƒåªçœ‹å­—ç¬¦ä¸²çš„å¼€å¤´ã€‚

å¦‚æœ $a="3"$ï¼Œ$b="30"$ï¼š

1.  **å­—å…¸åºé€»è¾‘**ï¼šæ¯”è¾ƒç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œéƒ½æ˜¯ '3'ï¼›æ¯”è¾ƒç¬¬äºŒä¸ªå­—ç¬¦ï¼Œ$b$ æœ‰ '0'ï¼Œ$a$ ç»“æŸäº†ã€‚åœ¨å­—å…¸åºä¸­ï¼ŒçŸ­çš„å‰ç¼€è¢«è§†ä¸º"å°äº"é•¿ä¸²ï¼ˆå¦‚æœé•¿ä¸²å‰é¢éƒ¨åˆ†ç›¸åŒï¼‰ï¼Œæ‰€ä»¥ "30" > "3"ã€‚
2.  **æ’åºç»“æœ**ï¼š$b$ æ’åœ¨ $a$ å‰é¢ï¼Œå¾—åˆ° "303"ã€‚
3.  **å®é™…æœ€ä¼˜**ï¼šå¦‚æœæˆ‘ä»¬æŠŠ $a$ æ”¾åœ¨ $b$ å‰é¢ï¼Œå¾—åˆ° "330"ã€‚æ˜¾ç„¶ $330 > 303$ã€‚

**ç»“è®º**ï¼šå•çº¯çœ‹æ•°å­—æœ¬èº«çš„å¤§å°ï¼ˆæˆ–å­—å…¸åºï¼‰æ— æ³•å†³å®šæ‹¼æ¥åçš„ç»“æœï¼Œå¿…é¡»çœ‹**"è°æ”¾åé¢èƒ½è®©æ•´ä½“æ›´å¤§"**ã€‚

### âœ… æ­£ç¡®å†™æ³•

æˆ‘ä»¬éœ€è¦æ¯”è¾ƒ $a+b$ å’Œ $b+a$ è¿™ä¸¤ä¸ª**æ‹¼æ¥åçš„æ•´ä½“**è°æ›´å¤§ã€‚

```cpp
bool cmp(const string& a, const string& b) {
    return a + b > b + a;
}
```

---

## ğŸ’¾ åŠ¨æ€è§„åˆ’é™·é˜±ï¼šä¸ºä»€ä¹ˆæœ´ç´ å†™æ³•ä¼šçˆ†å†…å­˜ï¼Ÿ

å¯¹äº $N \le 20$ çš„æ•°æ®èŒƒå›´ï¼Œç†è®ºä¸Š $2^{20} \approx 10^6$ ä¸ªçŠ¶æ€æ˜¯å¯ä»¥æ¥å—çš„ã€‚ä½†å¦‚æœç›´æ¥å¼€ `dp[1<<20]` ä¸”æ¯ä¸ªçŠ¶æ€å­˜ä¸€ä¸ªé•¿å­—ç¬¦ä¸²ï¼Œå¾ˆå®¹æ˜“è§¦å‘ **MLE (Memory Limit Exceeded)**ã€‚

### å†…å­˜çˆ†ç‚¸åŸå› åˆ†æ

1.  **å¯¹è±¡å¼€é”€**ï¼š$10^6$ ä¸ª `std::string` å¯¹è±¡æœ¬èº«ï¼ˆä»…æŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡ä¿¡æ¯ï¼‰å°±è¦å ç”¨çº¦ **24MB**ã€‚
2.  **æ•°æ®è†¨èƒ€**ï¼šæœ€å¯æ€•çš„æ˜¯å­˜å‚¨çš„å†…å®¹ã€‚æ‰€æœ‰å­é›†ï¼ˆ$2^{20}$ ä¸ªçŠ¶æ€ï¼‰ç”Ÿæˆçš„å­—ç¬¦ä¸²æ€»å­—ç¬¦æ•°ç´¯è®¡èµ·æ¥éå¸¸åºå¤§ï¼Œçº¦ä¸º **50MB ~ 80MB** ç”šè‡³æ›´å¤šã€‚
3.  **å³°å€¼å åŠ **ï¼šå¦‚æœä¸åŠ å¤„ç†ï¼Œè¿™äº›å­—ç¬¦ä¸²ä¼šåŒæ—¶å­˜åœ¨äºå†…å­˜ä¸­ã€‚åŠ ä¸Šå¯¹è±¡å¼€é”€ï¼Œæ€»å†…å­˜å¯èƒ½è½»æ¾è¶…è¿‡ **100MB**ï¼Œåœ¨å†…å­˜é™åˆ¶ä¸º 64MB æˆ– 128MB çš„ OJ ä¸Šä¼šç›´æ¥çˆ†æ‰ã€‚

### âœ… å†…å­˜ä¼˜åŒ–æ ¸å¿ƒ

**æ€è·¯**ï¼šæŒ‰é˜¶æ®µï¼ˆé•¿åº¦ï¼‰é€’æ¨ï¼ŒåŠæ—¶é‡Šæ”¾"è¿‡æœŸ"çŠ¶æ€ã€‚

æˆ‘ä»¬åœ¨è®¡ç®—é•¿åº¦ä¸º `len` çš„çŠ¶æ€æ—¶ï¼Œåªéœ€è¦ç”¨åˆ°é•¿åº¦ä¸º `len-1` çš„çŠ¶æ€ã€‚é•¿åº¦å°äº `len-2` çš„çŠ¶æ€**æ°¸è¿œä¸ä¼šå†è¢«è®¿é—®**ï¼Œå› æ­¤å¯ä»¥ç«‹å³é‡Šæ”¾ã€‚

```cpp
// ä¼˜åŒ–æ ¸å¿ƒä»£ç ç‰‡æ®µ
for (int len = 0; len <= n; ++len) {
    for (int S = 0; S < FULL; S++) {
        int cnt = pc[S]; // S ä¸­ 1 çš„ä¸ªæ•°
        
        // å¦‚æœ S çš„é•¿åº¦æ¯”å½“å‰éœ€è¦çš„é•¿åº¦ len å°è¶…è¿‡ 1ï¼Œè¯´æ˜å®ƒå·²ç»æ²¡ç”¨äº†
        if (cnt < len - 1) {
            string().swap(dp[S]); // <--- æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼
            continue;
        }
        // ... è®¡ç®— dp[S] ...
    }
}
```

é€šè¿‡è¿™ç§æ‰‹åŠ¨æ¸…ç†ï¼Œå†…å­˜å³°å€¼ä¼šä» 100MB+ é™è‡³ 40MB å·¦å³ï¼Œå®‰å…¨è¿‡å…³ã€‚

---

## ğŸ’» å®Œæ•´è§£æ³•ä¸€ï¼šè´ªå¿ƒæ’åº (æ¨è)

è¿™æ˜¯ç«èµ›ä¸­æœ€æ ‡å‡†ã€æ•ˆç‡æœ€é«˜çš„è§£æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ $O(N \log N)$ã€‚

```cpp
#include <iostream>
#include <string>
#include <algorithm>
using namespace std;

const int MAXN = 25;
string s[MAXN];

// æ­£ç¡®çš„è´ªå¿ƒæ¯”è¾ƒå‡½æ•°
bool cmp(const string& a, const string& b) {
    return a + b > b + a;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);
    
    int n;
    cin >> n;
    for (int i = 0; i < n; i++) {
        cin >> s[i];
    }
    
    sort(s, s + n, cmp);
    
    for (int i = 0; i < n; i++) {
        cout << s[i];
    }
    cout << "\n";
    
    return 0;
}
```

---

## ğŸ’» å®Œæ•´è§£æ³•äºŒï¼šçŠ¶æ€å‹ç¼© DP (å†…å­˜ä¼˜åŒ–ç‰ˆ)

è¿™æ˜¯é’ˆå¯¹é¢˜æ„"å¿…é¡»ç”¨åŠ¨æ€è§„åˆ’"æˆ–"å°æ•°æ®èŒƒå›´é€šç”¨è§£"çš„å†™æ³•ã€‚åŒ…å«äº†ä¸Šè¿°çš„å†…å­˜é‡Šæ”¾ä¼˜åŒ–ã€‚

```cpp
#include <iostream>
#include <string>
#include <algorithm>
using namespace std;

const int MAXN = 20;
const int MAXS = 1 << MAXN;

int n;
string s[MAXN];
string dp[MAXS]; // dp[mask] è®°å½•çŠ¶æ€ mask ä¸‹çš„æœ€å¤§æ‹¼æ¥å­—ç¬¦ä¸²
int pc[MAXS];    // pc[i] è®°å½• i çš„äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°

int main() {
    // ä¼˜åŒ–è¾“å…¥è¾“å‡º
    ios::sync_with_stdio(false);
    cin.tie(0);
    
    cin >> n;
    for (int i = 0; i < n; i++) {
        cin >> s[i];
    }
    
    int FULL = 1 << n;
    
    // é¢„å¤„ç† popcountï¼šè®¡ç®—æ¯ä¸ªçŠ¶æ€åŒ…å«å‡ ä¸ªæ•°å­—
    pc[0] = 0;
    for (int i = 1; i < FULL; ++i) {
        pc[i] = pc[i & (i - 1)] + 1; // lowbit æŠ€å·§
    }
    
    // åˆå§‹åŒ–ï¼šæ‰€æœ‰çŠ¶æ€ä¸ºç©º
    for (int S = 0; S < FULL; S++) {
        dp[S] = "";
    }
    
    // æŒ‰é˜¶æ®µï¼ˆé•¿åº¦ï¼‰è¿›è¡Œ DP
    for (int len = 0; len <= n; ++len) {
        for (int S = 1; S < FULL; S++) {
            int cnt = pc[S]; 
            
            // ã€å†…å­˜ä¼˜åŒ–æ ¸å¿ƒã€‘
            // å¦‚æœå½“å‰çŠ¶æ€æ•°å­—ä¸ªæ•° < len - 1ï¼Œè¯´æ˜å®ƒæ˜¯"è¿‡æ°”"çš„çŠ¶æ€ï¼Œå·²ç»ç”¨ä¸åˆ°äº†
            if (cnt < len - 1) {
                string().swap(dp[S]); // å¼ºåˆ¶é‡Šæ”¾è¯¥å­—ç¬¦ä¸²å ç”¨çš„å †å†…å­˜
                continue;
            }
            
            // å¦‚æœå½“å‰çŠ¶æ€æ•°å­—ä¸ªæ•° != lenï¼Œè¯´æ˜æ˜¯å‰é©±çŠ¶æ€ï¼ˆlen-1ï¼‰ï¼Œ
            // æˆ‘ä»¬åªéœ€è¦"è¯»å–"å®ƒï¼Œä¸éœ€è¦åœ¨å½“å‰è½®æ¬¡"æ›´æ–°"å®ƒï¼Œæ‰€ä»¥è·³è¿‡
            if (cnt != len)
                continue;
                
            // å¼€å§‹è®¡ç®— dp[S]
            for (int i = 0; i < n; i++) {
                // å¦‚æœæ•°å­— i åœ¨é›†åˆ S ä¸­
                if (S & (1 << i)) {
                    int T = S ^ (1 << i); // å»æ‰ i åçš„å‰ä¸€ä¸ªçŠ¶æ€
                    
                    // å°è¯•æ‹¼æ¥ï¼šå‰ä¸€ä¸ªçŠ¶æ€çš„æœ€ä¼˜è§£ + å½“å‰çš„ i
                    string cand = dp[T] + s[i];
                    
                    if (dp[S].empty() || cand > dp[S]) {
                        dp[S] = cand;
                    }
                }
            }
        }
    }
    
    // è¾“å‡ºæœ€ç»ˆçŠ¶æ€ï¼ˆæ‰€æœ‰ä½éƒ½ä¸º1ï¼‰çš„ç»“æœ
    cout << dp[FULL - 1] << "\n";
    return 0;
}
```