---
title: memset çš„çœŸç›¸ï¼šä¸ºä»€ä¹ˆå®ƒä¸èƒ½æŠŠæ•°ç»„è®¾ä¸º 1ï¼Ÿ
date: 2026-01-30
description: æ·±å…¥è§£æ C++ ä¸­ memset çš„åº•å±‚åŸç†ã€å¸¸è§è¯¯ç”¨ï¼Œä»¥åŠå¦‚ä½•ç”¨ std::fill å®‰å…¨é«˜æ•ˆåœ°åˆå§‹åŒ–æ•°ç»„ã€‚
---
---

# ğŸ’¡ `memset` çš„çœŸç›¸ï¼šä¸ºä»€ä¹ˆå®ƒä¸èƒ½æŠŠæ•°ç»„è®¾ä¸º 1ï¼Ÿä»¥åŠå¦‚ä½•æ­£ç¡®åˆå§‹åŒ–æ•°ç»„

åœ¨ C++ ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å°†æ•°ç»„æˆ–å†…å­˜å—åˆå§‹åŒ–ä¸ºæŸä¸ªå€¼ã€‚å¾ˆå¤šåˆå­¦è€…ä¼šä¸‹æ„è¯†åœ°å†™å‡ºè¿™æ ·çš„ä»£ç ï¼š

```cpp
int arr[100];
memset(arr, 1, sizeof(arr)); // è¯•å›¾æŠŠæ¯ä¸ªå…ƒç´ è®¾ä¸º 1ï¼Ÿ
```

ä½†è¿è¡Œåå´å‘ç°ï¼š**æ•°ç»„é‡Œçš„å€¼æ ¹æœ¬ä¸æ˜¯ 1**ï¼  
è¿™èƒŒåçš„åŸå› ï¼Œæ¶‰åŠåˆ° `memset` çš„åº•å±‚å·¥ä½œåŸç†â€”â€”å®ƒæ“ä½œçš„æ˜¯**å­—èŠ‚**ï¼Œè€Œä¸æ˜¯**å…ƒç´ **ã€‚

æœ¬æ–‡å°†å½»åº•è®²æ¸… `memset` çš„æœºåˆ¶ã€å¸¸è§é”™è¯¯ï¼Œå¹¶ä»‹ç»çœŸæ­£å®‰å…¨å¯é çš„æ›¿ä»£æ–¹æ¡ˆï¼š`std::fill`ã€‚

---

## ä¸€ã€`memset` åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ

`memset` çš„å‡½æ•°åŸå‹æ˜¯ï¼š

```cpp
void* memset(void* ptr, int value, size_t num_bytes);
```

å®ƒçš„ä½œç”¨æ˜¯ï¼š  
> **ä» `ptr` å¼€å§‹ï¼Œå°†æ¥ä¸‹æ¥çš„ `num_bytes` ä¸ªå­—èŠ‚ï¼Œæ¯ä¸ªéƒ½è®¾ç½®ä¸º `(unsigned char)value`ã€‚**

æ¢å¥è¯è¯´ï¼š**`memset` æ˜¯æŒ‰ *å­—èŠ‚* èµ‹å€¼ï¼Œä¸æ˜¯æŒ‰ *å…ƒç´ * èµ‹å€¼ï¼**

### âœ… å®‰å…¨ç”¨æ³• 1ï¼šæ¸…é›¶ï¼ˆé€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼‰
```cpp
int arr[3];
memset(arr, 0, sizeof(arr)); 
// æ¯ä¸ªå­—èŠ‚ = 0x00 â†’ int = 0x00000000 = 0
```
âœ… å®‰å…¨ï¼Œå› ä¸ºæ•´å‹ã€æµ®ç‚¹æ•°ï¼ˆIEEE 754ï¼‰ã€æŒ‡é’ˆç­‰ç±»å‹çš„â€œé›¶å€¼â€åœ¨å†…å­˜ä¸­éƒ½æ˜¯å…¨ 0ã€‚

### âœ… å®‰å…¨ç”¨æ³• 2ï¼šæ•´å‹è®¾ä¸º -1ï¼ˆä»…é™æ•´å‹ï¼ï¼‰
```cpp
int a[2];
memset(a, -1, sizeof(a));
// -1 â†’ 0xFFï¼›æ¯ä¸ªå­—èŠ‚ = 0xFF â†’ int = 0xFFFFFFFF = -1ï¼ˆè¡¥ç ï¼‰
```
âš ï¸ æ³¨æ„ï¼š**ä¸é€‚ç”¨äº `float`/`double`**ï¼å…¨ `0xFF` å¯¹æµ®ç‚¹æ•°æ˜¯ NaNï¼ˆéæ³•å€¼ï¼‰ã€‚

---

## äºŒã€`memset(arr, 1, sizeof(arr))` ä¸ºä»€ä¹ˆæ˜¯é”™çš„ï¼Ÿ

å‡è®¾ `int` å  4 å­—èŠ‚ï¼š

- `memset(arr, 1, sizeof(arr))` ä¼šæŠŠæ¯ä¸ªå­—èŠ‚è®¾ä¸º `0x01`ã€‚
- äºæ˜¯ `arr[0]` åœ¨å†…å­˜ä¸­å˜æˆï¼š`0x01 01 01 01`ã€‚
- åœ¨å°ç«¯åºæœºå™¨ä¸Šï¼Œè¿™ä¸ªå€¼æ˜¯ï¼š
  ```cpp
  0x01010101 = 16843009
  ```
- **ä¸æ˜¯ 1ï¼**

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `memset` **ä¸èƒ½ç”¨äºåˆå§‹åŒ–ä»»æ„æ•°å€¼**ã€‚

> âŒ `memset(arr, 5, sizeof(arr))` â†’ æ¯ä¸ª `int` å˜æˆ `0x05050505`ï¼ˆâ‰ˆ84215045ï¼‰ï¼Œä¸æ˜¯ 5ï¼

---

## ä¸‰ã€æ­£ç¡®çš„æ›¿ä»£æ–¹æ¡ˆï¼š`std::fill`

C++ æ ‡å‡†åº“æä¾›äº†è¯­ä¹‰æ¸…æ™°ã€ç±»å‹å®‰å…¨çš„å‡½æ•°ï¼š**`std::fill`**ã€‚

```cpp
#include <algorithm>
```

å®ƒçš„å·¥ä½œæ–¹å¼æ˜¯ï¼š**å¯¹èŒƒå›´å†…çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œ `element = value`**ï¼Œå®Œå…¨æŒ‰ç±»å‹èµ‹å€¼ï¼Œå®‰å…¨å¯é ã€‚

### ğŸ“Œ å¸¸è§ç”¨æ³•ç¤ºä¾‹

#### 1. æ•´å‹æ•°ç»„
```cpp
int arr[5];
std::fill(arr, arr + 5, 42);  // å…¨éƒ¨è®¾ä¸º 42
// ç»“æœ: [42, 42, 42, 42, 42]
```

#### 2. æµ®ç‚¹æ•°æ•°ç»„
```cpp
double data[4];
std::fill(data, data + 4, 3.14159);
// ç»“æœ: [3.14159, 3.14159, 3.14159, 3.14159]
```

#### 3. å¸ƒå°”æ•°ç»„
```cpp
bool flags[6];
std::fill(flags, flags + 6, true);
// æ‰€æœ‰å…ƒç´ ä¸º true
```

#### 4. å­—ç¬¦ä¸²æ•°ç»„
```cpp
std::string words[3];
std::fill(words, words + 3, "hello");
// ç»“æœ: ["hello", "hello", "hello"]
```

#### 5. å¤šç»´æ•°ç»„ï¼ˆé€šè¿‡é¦–å°¾åœ°å€ï¼‰
```cpp
int grid[10][20];
std::fill(&grid[0][0], &grid[0][0] + 10*20, -1);
// å°†æ•´ä¸ª 10x20 ç½‘æ ¼åˆå§‹åŒ–ä¸º -1
```

#### 6. ä¸å®¹å™¨é…åˆï¼ˆå¦‚ vectorï¼‰
```cpp
std::vector<int> vec(100);
std::fill(vec.begin(), vec.end(), 7);
// æ‰€æœ‰å…ƒç´ è®¾ä¸º 7
```

---

## å››ã€ä¸ºä»€ä¹ˆ `std::fill` æ›´å¥½ï¼Ÿ

| ç‰¹æ€§ | `memset` | `std::fill` |
|------|--------|-------------|
| æŒ‰å…ƒç´ èµ‹å€¼ | âŒ | âœ… |
| æ”¯æŒæµ®ç‚¹æ•° | âŒï¼ˆéé›¶å€¼ï¼‰ | âœ… |
| æ”¯æŒ string / è‡ªå®šä¹‰ç±» | âŒï¼ˆå±é™©ï¼‰ | âœ… |
| ä»£ç æ„å›¾æ¸…æ™° | âš ï¸ æ¨¡ç³Š | âœ… æ˜ç¡® |
| æ€§èƒ½ | å¿«ï¼ˆä»…é™ 0/-1ï¼‰ | ä¸€æ ·å¿«ï¼ˆç¼–è¯‘å™¨ä¼˜åŒ–ï¼‰ |

> ğŸ” **ç°ä»£ç¼–è¯‘å™¨ä¼šå°† `std::fill` ä¼˜åŒ–ä¸ºé«˜æ•ˆå¾ªç¯ï¼Œç”šè‡³å‘é‡åŒ–æŒ‡ä»¤ï¼Œæ€§èƒ½ä¸è¾“æ‰‹å†™ for å¾ªç¯ã€‚**

---

## äº”ã€æœ€ä½³å®è·µå»ºè®®

- âœ… **æ¸…é›¶**ï¼šå¯ç”¨ `memset(arr, 0, sizeof(arr))`ï¼ˆé«˜æ•ˆï¼‰æˆ– `std::fill(..., 0)`ï¼ˆæ›´é€šç”¨ï¼‰ã€‚
- âœ… **æ•´å‹è®¾ä¸º -1**ï¼š`memset` å¯ç”¨ï¼Œä½†å»ºè®®åŠ æ³¨é‡Šè¯´æ˜ã€‚
- âœ… **å…¶ä»–ä»»ä½•å€¼ï¼ˆ1ã€3.14ã€"abc"ã€true ç­‰ï¼‰**ï¼š**å¿…é¡»ä½¿ç”¨ `std::fill`**ã€‚
- âŒ **æ°¸è¿œä¸è¦ç”¨ `memset` åˆå§‹åŒ–é 0/-1 çš„å¤šå­—èŠ‚ç±»å‹**ã€‚

---

## å…­ã€ç»“è¯­

`memset` æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åº•å±‚å·¥å…·ï¼Œä½†å®ƒ**ä¸æ˜¯ä¸‡èƒ½çš„åˆå§‹åŒ–å‡½æ•°**ã€‚  
å½“ä½ æƒ³â€œæŠŠæ•°ç»„æ¯ä¸ªå…ƒç´ è®¾ä¸ºæŸä¸ªå€¼â€æ—¶ï¼Œè¯·è®°ä½ï¼š

> **`memset` æ“ä½œçš„æ˜¯ *å­—èŠ‚*ï¼Œè€Œä½ å…³å¿ƒçš„æ˜¯ *å…ƒç´ *ã€‚**

æ­¤æ—¶ï¼Œ`std::fill` æ‰æ˜¯ä½ çœŸæ­£éœ€è¦çš„æ­¦å™¨â€”â€”**å®‰å…¨ã€é€šç”¨ã€é«˜æ•ˆã€æ¸…æ™°**ã€‚

ç”¨å¯¹å·¥å…·ï¼Œå°‘è¸©å‘ï¼Œä»£ç æ›´å¥å£®ï¼

---

> ğŸ“Œ **è®°ä½å£è¯€**ï¼š  
> **æ¸…é›¶å¯ç”¨ `memset`ï¼Œèµ‹å€¼è¯·ç”¨ `std::fill`ï¼**

--- 